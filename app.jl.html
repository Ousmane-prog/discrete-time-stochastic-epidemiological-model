<div
  class="row"
  style="text-align: center; margin-bottom: 20px; padding-top: 10px"
>
  <div class="st-col col-12">
    <h1>Bayesian Inference of Differential Equations with Turing</h1>
    <p style="font-size: 16px; color: gray">
      This dashboard performs a stochastic discrete time simulation of the SIR
      (Susceptible-Infected) model using the <strong>Turing.jl</strong> package
      in a Bayesian framework. The estimation is done using simulated data.
    </p>
    <h2>SIR Model is described as follow</h2>
    <div
      v-katex:display="' \\frac{dS}{dt}(t) = - \\beta S(t) I(t) + \\gamma I(t) '"
      style="font-size: 20px"
    ></div>
    <div
      v-katex:display="' \\frac{dI}{dt}(t) = \\beta S(t) I(t) - \\gamma I(t) '"
      style="font-size: 20px"
    ></div>
    <p style="font-size: 16px; color: gray">
      Where: <span v-katex='{"expression":"S(t)"}'></span>,
      <span v-katex='{"expression":"I(t)"}'></span>, and
      <span v-katex='{"expression":"R(t)"}'></span> are respectively the number
      of susceptible, infected, and recovered individuals at time
      <span v-katex='{"expression":"t"}'></span>,
      <span v-katex='{"expression":"\\beta"}'></span> and
      <span v-katex='{"expression":"\\gamma"}'></span> respectively the
      transmission and recovery rate.
    </p>
  </div>
</div>

<div class="container">
  <h1>SIR Model Simulation</h1>
  <div class="row">
    <div class="st-col col-12 col-sm st-module">
      <p>Adjust the parameters below to simulate the SIR model:</p>
      <label>Infection Rate (β): </label>
      <input type="range" min="0.1" max="1.0" step="0.01" v-model="beta" />
      <span>{{ beta }}</span>

      <label>Recovery Rate (γ): </label>
      <input type="range" min="0.01" max="1.0" step="0.01" v-model="gamma" />
      <span>{{ gamma }}</span>
      <div>
        <h2>Simulation Results</h2>
        <plotly :data="solplot" :layout="solplot_layout"></plotly>
      </div>
    </div>
    <div class="st-col col-12 col-sm st-module">
      <p>
        Adjust the noise noise level to generate simulated data for the
        parameter estimation:
      </p>
      <div>
        <label>Noise level (σ): </label>
        <input
          type="range"
          min="0.1"
          max=".9"
          step="0.1"
          v-model="noise_level"
        />
        <span>{{ noise_level }}</span>
      </div>
      <div>
        <plotly :data="data_plot" :layout="data_plot_layout"></plotly>
      </div>
    </div>
  </div>
</div>

<!-- Stochastic Discrete Model Section -->
<div class="container" style="margin-top: 30px">
  <h1>Stochastic Discrete-Time SIR Model</h1>
  <p style="font-size: 16px; color: gray">
    The discrete-time stochastic version uses binomial distributions for
    transitions between compartments, accounting for random variation in
    infection and recovery events.
  </p>
  <div class="row">
    <div class="st-col col-12 col-sm st-module">
      <h3>Initial Conditions and Parameters</h3>
      <div style="margin-bottom: 15px">
        <label>Initial Susceptible (S₀): </label>
        <input
          type="number"
          min="0"
          max="10000"
          step="10"
          v-model="S0_discrete"
        />
        <span>{{ S0_discrete }}</span>
      </div>
      <div style="margin-bottom: 15px">
        <label>Initial Infected (I₀): </label>
        <input
          type="number"
          min="0"
          max="1000"
          step="1"
          v-model="I0_discrete"
        />
        <span>{{ I0_discrete }}</span>
      </div>
      <div style="margin-bottom: 15px">
        <label>Initial Recovered (R₀): </label>
        <input
          type="number"
          min="0"
          max="1000"
          step="1"
          v-model="R0_discrete"
        />
        <span>{{ R0_discrete }}</span>
      </div>
      <div style="margin-bottom: 15px">
        <label>Time Steps: </label>
        <input type="range" min="50" max="500" step="10" v-model="time_steps" />
        <span>{{ time_steps }}</span>
      </div>
      <div style="margin-bottom: 15px">
        <label>Δt (Time Step Size): </label>
        <input
          type="range"
          min="0.01"
          max="0.5"
          step="0.01"
          v-model="delta_t"
        />
        <span>{{ delta_t }}</span>
      </div>
    </div>
    <div class="st-col col-12 col-sm st-module">
      <h3>Single Stochastic Realization</h3>
      <plotly :data="stochastic_plot" :layout="stochastic_plot_layout"></plotly>
    </div>
  </div>

  <div class="row" style="margin-top: 20px">
    <div class="st-col col-12 col-sm st-module">
      <h3>Ensemble Analysis</h3>
      <div style="margin-bottom: 15px">
        <label>Number of Realizations: </label>
        <input
          type="range"
          min="10"
          max="200"
          step="10"
          v-model="n_realizations"
        />
        <span>{{ n_realizations }}</span>
      </div>
    </div>
    <div class="st-col col-12 col-sm st-module">
      <h3>Stochastic Ensemble (Mean ± 90% CI)</h3>
      <plotly :data="ensemble_plot" :layout="ensemble_plot_layout"></plotly>
    </div>
  </div>
</div>

<!-- <div class="container">
  <h1>Parameter estimation</h1>
  <div class="row">
    <h2>Summary Statistics</h2>
  </div>
  <div class="row">
    <div class="st-col col-12 col-sm st-module">
      <table class="table table-bordered">
        <thead>
          <tr>
            <th style="text-align: center">Parameters</th>
            <th style="text-align: center">True</th>
            <th style="text-align: center">Mean</th>
            <th style="text-align: center">Std</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="text-align: center">beta</td>
            <td style="text-align: center">0.52</td>
            <td style="text-align: center">{{ beta_mean }}</td>
            <td style="text-align: center">{{ beta_std }}</td>
          </tr>
          <tr>
            <td style="text-align: center">gamma</td>
            <td style="text-align: center">{{ 0.24 }}</td>
            <td style="text-align: center">{{ gamma_mean }}</td>
            <td style="text-align: center">{{ gamma_std }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="container">
    <h2>Posterior distribution of the parameters</h2>
    <div class="row">
      <div class="st-col col-12 col-sm st-module">
        <plotly
          :data="bayesian_plot_beta"
          :layout="bayesian_plot_layout_beta"
        ></plotly>
      </div>
      <div class="st-col col-12 col-sm st-module">
        <plotly
          :data="bayesian_plot_gamma"
          :layout="bayesian_plot_layout_gamma"
        ></plotly>
      </div>
    </div>
  </div> -->

  <div
    class="footer"
    style="
      text-align: center;
      margin-top: 20px;
      padding: 10px;
      background-color: #f9f9f9;
      font-size: 14px;
      color: gray;
    "
  >
    <p>Created by <strong>Ousmane Junior</strong></p>
  </div>
</div>
